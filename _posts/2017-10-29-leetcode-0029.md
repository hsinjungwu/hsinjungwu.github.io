---
layout: post
title:  "[LeetCode] #29 Divide Two Integers"
date:   2017-10-29 12:00:54
tags:
  - LeetCode
  - algorithm
  - ProjectEuler
---

* content
{:toc}

題目如下：

> Divide two integers without using multiplication, division and mod operator.
>
> If it is overflow, return MAX_INT.

<!-- more -->

## 一開始的做法

之前寫 [Project Euler][PE] 時曾經因為要計算超大數字時而自創 `StringInteger` 這個 `Class`，並實做了四則運算，所以我直覺想到這題可以用 **減法** 解決。

因此困擾我的反而是 <katex>10 \div -3</katex> 到底是表示為 <katex>10 = -3 \times 4 + 2</katex>、<katex>10 = -3 \times 3 + (-1)</katex> 還是 <katex>10 = -3 \times (-3) + 1</katex>？ 因為總記得有江湖傳言說餘數須為非負整數[^1][^2]。在測試之後得到商數規則是

> 先算兩數絕對值的商，如兩者異號則加上負號。

了解之後我就頭也不回的交卷了。

## 會遇到的問題

1. 當被除數為 *-2147483648*
2. 當被除數遠大於除數

關於第一點，我的做法是把 <katex>-2147483648 \div -1</katex> 當成特例避開。其他的先轉成 `long` 再轉絕對值。 

至於第二點則會超過時間限制。後來想到可以用跳的，每次減都減之前的兩倍，直到爆掉，這樣速度可以快很多。前者的時間複雜度是 <katex>\mathrm{O}(n)</katex>，則後者為 <katex>\mathrm{O}((\log{}n)^2)</katex>。因為 

<katex centred="true">P / Q = N = (2^{a_1}-1) + (2^{a_2}-1) + \cdots + (2^{a_n}-1)</katex>

所以前者要計算 <katex>N</katex> 次而後者只要 <katex>a_1 + a_2 + \cdots + a_n</katex> 次。如果把數字帶進去的話，前者最慘要算 2147483647 次，而後者只需 120 次。

## 最後的答案

``` cs
private int Divide(long a, long b)
{
    if (a < b) return 0;
    long c = b;
    int ans = 0;
    while (a >= c)
    {
        a -= c;
        c += c;
        ans += ans + 1;
    }
    return ans + Divide(a, b);
}
```

看了別人的寫法，有人使用了 [Left Shift Operator(<< Operator)](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/left-shift-operator) 來代替 `+=`，不過當我改成以下的寫法速度不升反降。 :open_mouth: 沒有頭緒～

``` diff
- c += c;
- ans += ans + 1;
+ c = c << 1;
+ ans = (ans << 1) + 1;
```

## 心得

我覺得 [Project Euler][PE] 跟 [LeetCode][LC] 差別在於前者是只問答案，所以只要你的電腦夠力加上你的耐心夠好，有些題目暴力法是可以解決的。而後者則會有效率上的考量，所以不能讓你隨心所欲。但無論如何想出好的演算法才是王道！ :100:

[PE]: https://projecteuler.net/
[LC]: https://leetcode.com/

----

[^1]: [一般整數的餘數](https://zh.wikipedia.org/wiki/余数#.E4.B8.80.E8.88.AC.E6.95.B4.E6.95.B0.E7.9A.84.E4.BD.99.E6.95.B0)
[^2]: [整數除法](http://highscope.ch.ntu.edu.tw/wordpress/?p=12324)